<!DOCTYPE html> <html lang="en-US"> 
<!-- Mirrored from www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 04 Aug 2023 18:06:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script src="../../assets/js/vendor/lunr.min.js"></script> <script src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="../../favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Implementation notes | Research Object Crate (RO-Crate)</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Implementation notes" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="RO-Crate is a community effort to establish a lightweight approach to packaging research data with their metadata. It is based on schema.org annotations in JSON-LD, and aims to make best-practice in formal metadata description accessible and practical for use in a wider variety of situations, from an individual researcher working with a folder of data, to large data-intensive computational research environments." /> <meta property="og:description" content="RO-Crate is a community effort to establish a lightweight approach to packaging research data with their metadata. It is based on schema.org annotations in JSON-LD, and aims to make best-practice in formal metadata description accessible and practical for use in a wider variety of situations, from an individual researcher working with a folder of data, to large data-intensive computational research environments." /> <link rel="canonical" href="implementation-notes.html" /> <meta property="og:url" content="https://www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html" /> <meta property="og:site_name" content="Research Object Crate (RO-Crate)" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Implementation notes" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"RO-Crate is a community effort to establish a lightweight approach to packaging research data with their metadata. It is based on schema.org annotations in JSON-LD, and aims to make best-practice in formal metadata description accessible and practical for use in a wider variety of situations, from an individual researcher working with a folder of data, to large data-intensive computational research environments.","headline":"Implementation notes","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.researchobject.org/ro-crate/assets/img/ro-crate-wide.svg"}},"url":"https://www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in RO-Crate 1.1 category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="../index.html" class="nav-list-link">RO-Crate 1.1</a><ul class="nav-list"><li class="nav-list-item "><a href="../introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item "><a href="../terminology.html" class="nav-list-link">Terminology</a></li><li class="nav-list-item "><a href="../structure.html" class="nav-list-link">RO-Crate Structure</a></li><li class="nav-list-item "><a href="../metadata.html" class="nav-list-link">Metadata of the RO-Crate</a></li><li class="nav-list-item "><a href="../root-data-entity.html" class="nav-list-link">Root Data Entity</a></li><li class="nav-list-item "><a href="../data-entities.html" class="nav-list-link">Data Entities</a></li><li class="nav-list-item "><a href="../contextual-entities.html" class="nav-list-link">Contextual Entities</a></li><li class="nav-list-item "><a href="../provenance.html" class="nav-list-link">Provenance of entities</a></li><li class="nav-list-item "><a href="../workflows.html" class="nav-list-link">Workflows and scripts</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Appendix category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="index.html" class="nav-list-link">Appendix</a><ul class="nav-list"><li class="nav-list-item "> <a href="changelog.html" class="nav-list-link">Changelog</a> </li><li class="nav-list-item "> <a href="relative-uris.html" class="nav-list-link">Handling relative URI references</a> </li><li class="nav-list-item active"> <a href="implementation-notes.html" class="nav-list-link active">Implementation notes</a> </li><li class="nav-list-item "> <a href="jsonld.html" class="nav-list-link">RO-Crate JSON-LD</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="../../background.html" class="nav-list-link">Background</a></li><li class="nav-list-item"><a href="../../community-2.html" class="nav-list-link">Community</a></li><li class="nav-list-item"><a href="../../examples.html" class="nav-list-link">Examples</a></li><li class="nav-list-item"><a href="../../outreach.html" class="nav-list-link">Outreach and Publications</a></li><li class="nav-list-item"><a href="../../profiles.html" class="nav-list-link">Profiles</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in RO-Crate In Use category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="../../in-use/index.html" class="nav-list-link">RO-Crate In Use</a><ul class="nav-list"><li class="nav-list-item "><a href="../../in-use/LDaCA.html" class="nav-list-link">Language Data Commons of Australia (LDaCA) Program</a></li><li class="nav-list-item "><a href="../../in-use/life_monitor.html" class="nav-list-link">Life Monitor</a></li><li class="nav-list-item "><a href="../../in-use/rohub.html" class="nav-list-link">ROHub</a></li><li class="nav-list-item "><a href="../../in-use/survey-ontology.html" class="nav-list-link">Survey Ontology</a></li></ul></li><li class="nav-list-item"><a href="../../specification.html" class="nav-list-link">Specification</a></li><li class="nav-list-item"><a href="../../tools/index.html" class="nav-list-link">Tools</a></li><li class="nav-list-item"><a href="../../tutorials.html" class="nav-list-link">Tutorials</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Research Object Crate (RO-Crate)" aria-label="Search Research Object Crate (RO-Crate)" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/ResearchObject/ro-crate" class="site-button" > RO-Crate on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../index.html">RO-Crate 1.1</a></li> <li class="breadcrumb-nav-list-item"><a href="index.html">Appendix</a></li> <li class="breadcrumb-nav-list-item"><span>Implementation notes</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <!-- Copyright 2019-2020 University of Technology Sydney Copyright 2019-2020 The University of Manchester UK Copyright 2019-2020 RO-Crate contributors<https://github.com/ResearchObject/ro-crate/graphs/contributors> Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. --> <h1 class="no_toc" id="appendix-implementation-notes"> <a href="#appendix-implementation-notes" class="anchor-heading" aria-labelledby="appendix-implementation-notes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> APPENDIX: Implementation notes </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#programming-with-json-ld" id="markdown-toc-programming-with-json-ld">Programming with JSON-LD</a></li> <li><a href="#combining-with-other-packaging-schemes" id="markdown-toc-combining-with-other-packaging-schemes">Combining with other packaging schemes</a> <ol> <li><a href="#adding-ro-crate-to-bagit" id="markdown-toc-adding-ro-crate-to-bagit">Adding RO-Crate to Bagit</a> <ol> <li><a href="#base-uri-in-bagit" id="markdown-toc-base-uri-in-bagit">Base URI in BagIt</a></li> <li><a href="#referencing-external-files" id="markdown-toc-referencing-external-files">Referencing external files</a></li> <li><a href="#snapshots-of-external-files" id="markdown-toc-snapshots-of-external-files">Snapshots of external files</a></li> </ol> </li> <li><a href="#example-of-wrapping-a-bagit-bag-in-an-ro-crate" id="markdown-toc-example-of-wrapping-a-bagit-bag-in-an-ro-crate">Example of wrapping a BagIt bag in an RO-Crate</a></li> </ol> </li> <li><a href="#repository-specific-identifiers" id="markdown-toc-repository-specific-identifiers">Repository-specific identifiers</a></li> </ol> <h2 id="programming-with-json-ld"> <a href="#programming-with-json-ld" class="anchor-heading" aria-labelledby="programming-with-json-ld"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programming with JSON-LD </h2> <p>When implementing tools to work with RO-Crate it is not necessary to use JSON-LD software libraries, however, programmers should keep in mind the following:</p> <ul> <li> <p><strong><em>RO-Crate JSON-lD</em> has a flat structure</strong>; every entity is a JSON object directly within the <code class="language-plaintext highlighter-rouge">@graph</code> array in the <em>RO-Crate Metadata File</em>. A useful strategy when processing a crate is to build a look-up table and/or function so that entities can be found via their ID, for example provide a method such as <code class="language-plaintext highlighter-rouge">getEntity(id)</code> which returns an entity by its id or a <code class="language-plaintext highlighter-rouge">null</code> value if it’s not there.</p> </li> <li> <p><strong>Code defensively</strong>. Code should not assume that values will always be a String; values for properties may be single scalar values such as strings or integers (<code class="language-plaintext highlighter-rouge">"2"</code> or 2), or references to other entities such as <code class="language-plaintext highlighter-rouge">{"@id", "_:1"}</code> (where the referenced entity may or may not be described in the crate, see the point above about having a <code class="language-plaintext highlighter-rouge">getEntity()</code> method).</p> </li> <li> <p><strong>Read the <em>whole</em> specification</strong>. The RO-Crate specification addresses common use cases individually, introducing aspects of the specification as in a progressive manner. Some key points, such as <em>entities may have more than one value for <code class="language-plaintext highlighter-rouge">@type</code></em>, may not be apparent from a quick reading.</p> </li> </ul> <h2 id="combining-with-other-packaging-schemes"> <a href="#combining-with-other-packaging-schemes" class="anchor-heading" aria-labelledby="combining-with-other-packaging-schemes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Combining with other packaging schemes </h2> <p>RO-Crates may co-exist with other packaging schemes, such as <a href="https://en.wikipedia.org/wiki/BagIt">BagIt</a> using two general approaches; either (a) <em>adding</em> RO-Crate into a package as part of the payload or (b) <em>wrapping</em> another kind of package. Examples using BagIt follow.</p> <p>BagIt is described in <a href="https://tools.ietf.org/html/rfc8493">RFC 8493</a>:</p> <blockquote> <p>[BagIt is] … a set of hierarchical file layout conventions for storage and transfer of arbitrary digital content. A “bag” has just enough structure to enclose descriptive metadata “tags” and a file “payload” but does not require knowledge of the payload’s internal semantics. This BagIt format is suitable for reliable storage and transfer.</p> </blockquote> <p>BagIt and RO-Crate have largely separate concerns - RO-Crate is focussed on rich metadata, the semantics of data, while BagIt is about reliable transfer.</p> <h3 id="adding-ro-crate-to-bagit"> <a href="#adding-ro-crate-to-bagit" class="anchor-heading" aria-labelledby="adding-ro-crate-to-bagit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding RO-Crate to Bagit </h3> <p>RO-Crate can be combined with BagIt simply by placing the RO-Crate files within the BagIt payload (<code class="language-plaintext highlighter-rouge">data/</code>) directory.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;BagIt base directory&gt;/
  |   bagit.txt                 # As per BagIt specification
  |   bag-info.txt              # As per BagIt specification
  |   manifest-&lt;algorithm&gt;.txt  # As per BagIt specification
  |   fetch.txt                 # Optional, per BagIt Specification
  |   data/                     # Payload: RO-Crate root directory
      |   ro-crate-metadata.json           # RO-Crate Metadata File MUST be present
      |   ro-crate-preview.html            # RO-Crate Website homepage MAY be present
      |   ro-crate-preview_files/          # MAY be present
      |   [payload files and directories]  # 1 or more SHOULD be present
</code></pre></div></div> <p>The <a href="https://www.rfc-editor.org/rfc/rfc8493.html#section-2.1.1">Bag declaration</a> <code class="language-plaintext highlighter-rouge">bagit.txt</code> MUST be present, the main role of this file is to mark the folder as a bag according to <a href="https://www.rfc-editor.org/rfc/rfc8493.html">RFC8493</a>. The file SHOULD have this fixed content in UTF-8:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BagIt-version: 1.0
Tag-File-Character-Encoding: UTF-8
</code></pre></div></div> <p>The <em>BagIt base directory</em> containing <code class="language-plaintext highlighter-rouge">bagit.txt</code> can have any name, and can be archived/transferred in any way, e.g. within a ZIP archive, SFTP or even be exposed on the web.</p> <p>The manifest file contains file checksums; the BagIt specifications <a href="https://www.rfc-editor.org/rfc/rfc8493.html#section-2.4">recommends SHA-512</a> as default algorithm, that is <code class="language-plaintext highlighter-rouge">manifest-sha512.txt</code> SHOULD be present.</p> <p>The BagIt manifest file MUST list the checksum of <em>all</em> payload files in <code class="language-plaintext highlighter-rouge">data/</code> and its subdirectories. Where <code class="language-plaintext highlighter-rouge">data/</code> is also the <a href="../structure.html">RO-Crate Root</a> the manifest therefore MUST include <code class="language-plaintext highlighter-rouge">ro-crate-metadata.json</code>:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>41846747…ee71  data/ro-crate-metadata.json
e1105ed0…5e13  data/chipseq_20200910.json
37fd3a02…bb95  data/results/pipeline_info/design_reads.csv
</code></pre></div></div> <blockquote class="note"> <p>The SHA-512 checksums have been shortened in the above example.</p> </blockquote> <p>Creating the manifest file without using BagIt tools/libraries can be done using the equivalent of:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>find data <span class="nt">-type</span> f <span class="nt">-print0</span> | xargs <span class="nt">-0</span> <span class="nb">sha512sum</span> <span class="o">&gt;</span> manifest-sha512.txt
</code></pre></div></div> <p>Similarly checking the payload directory:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sha512sum</span> <span class="nt">--quiet</span> <span class="nt">-c</span> manifest-sha512.txt
data/chipseq_20200910.json: FAILED
data/ro-crate-metadata.json: FAILED
<span class="nb">sha512sum</span>: WARNING: 2 computed checksums did NOT match
</code></pre></div></div> <p>The BagIt manifest complements the <a href="../structure.html">RO-Crate structure</a> as it provide a complete listing of all payload files with cryptographically strong checksums, ensuring the crate has been fully archived/transferred, which the weak CRC-32 checksum (TCP/IP, ZIP, gzip) is insufficient to guarantee, particularly for large crates.</p> <p>To ensure the manifest file itself is complete, it is RECOMMENDED to include its checksum in <code class="language-plaintext highlighter-rouge">tagmanifest-sha512.txt</code>:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>b0556450…8802  bag-info.txt
000b27e3…c52e  manifest-sha512.txt
</code></pre></div></div> <p class="warning">The BagIt manifest is intended to detect “bit rot” and accidental damage, it does not provide proof the RO-Crate has not been deliberately tampered with, as a malicious actor can also update the checksums.</p> <p>Guarding against such scenarious would require additional cryptographic measures, e.g.<br /> <code class="language-plaintext highlighter-rouge">gpg --detach-sign --armor --output tagmanifest-sha512.txt.asc tagmanifest-sha512.txt</code> in combination with a secure PGP key exchange or equivalent trust network.</p> <h4 id="base-uri-in-bagit"> <a href="#base-uri-in-bagit" class="anchor-heading" aria-labelledby="base-uri-in-bagit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Base URI in BagIt </h4> <p>The arcp specification suggests how <a href="https://tools.ietf.org/html/draft-soilandreyes-arcp-03#appendix-A.4">BagIt UUID identifiers</a> can be used to calculate the base URI of a bag, see section <a href="relative-uris.html#establishing-a-base-uri-inside-a-zip-file">Establishing a base URI inside a ZIP file</a>. For this purpose it is RECOMMENDED that <code class="language-plaintext highlighter-rouge">bag-info.txt</code> includes a fresh UUID like:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>External-Identifier: urn:uuid:24e51ca2-5067-4598-935a-dac4e327d05a
</code></pre></div></div> <h4 id="referencing-external-files"> <a href="#referencing-external-files" class="anchor-heading" aria-labelledby="referencing-external-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Referencing external files </h4> <p>The <a href="https://www.rfc-editor.org/rfc/rfc8493.html#section-2.2.3">BagIt fetch file</a> MAY be used to reference files to be downloaded into particular <code class="language-plaintext highlighter-rouge">data/</code> paths to <em>complete</em> the bag. These files may be large, require authentication or otherwise inconvenient to transfer within the BagIt folder.</p> <p>Example <code class="language-plaintext highlighter-rouge">fetch.txt</code> using <a href="https://git-lfs.github.com/">Git LFS</a>:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://media.githubusercontent.com/…/SPT5_INPUT_R1.bigWig 963489 data/results/SPT5_INPUT_R1.bigWig
</code></pre></div></div> <p>BagIt tools can help complete the bag and verify the checksum of the downloaded files according to the manifest.</p> <p>The RO-Crate contained in <code class="language-plaintext highlighter-rouge">data/</code> MAY describe the bag with <a href="../data-entities.html#embedded-data-entities-that-are-also-on-the-web">data entities</a> as if the bag was <em>complete</em>, even if the large file is not (yet) present:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"results/SPT5_INPUT_R1.bigWig"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"File"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Normalized SPT5_INPUT_R1 bigWig for genome browsers"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"encodingFormat"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://edamontology.org/format_3006"</span><span class="p">},</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://media.githubusercontent.com/media/biocompute-objects/bco-ro-example-chipseq/main/data/results/bwa/mergedLibrary/bigwig/SPT5_INPUT_R1.bigWig"</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>It is RECOMMENDED that the <code class="language-plaintext highlighter-rouge">url</code> is provided in the data entity and consistent with the line in <code class="language-plaintext highlighter-rouge">fetch.txt</code> in case the RO-Crate is transferred outside its BagIt container.</p> <p>The <code class="language-plaintext highlighter-rouge">fetch.txt</code> approach can also be useful where other files in the RO-Crate reference a downloadable file by relative paths within <code class="language-plaintext highlighter-rouge">data/</code>, even if this file is not itself described in the RO-Crate metadata.</p> <h4 id="snapshots-of-external-files"> <a href="#snapshots-of-external-files" class="anchor-heading" aria-labelledby="snapshots-of-external-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Snapshots of external files </h4> <p>As an alternative to the above, <a href="../data-entities.html#web-based-data-entities">web-based data entities</a> can be used in the RO-Crate:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://media.githubusercontent.com/media/biocompute-objects/bco-ro-example-chipseq/main/data/results/bwa/mergedLibrary/bigwig/SPT5_INPUT_R1.bigWig"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"File"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Normalized SPT5_INPUT_R1 bigWig for genome browsers"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"encodingFormat"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://edamontology.org/format_3006"</span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>The above data entity MAY be combined with <code class="language-plaintext highlighter-rouge">fetch.txt</code> in the BagIt base directory:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://media.githubusercontent.com/…/SPT5_INPUT_R1.bigWig 963489 data/snapshots/SPT5_INPUT_R1.bigWig
</code></pre></div></div> <p>In this case the file <code class="language-plaintext highlighter-rouge">data/snapshots/SPT5_INPUT_R1.bigWig</code> may be present, but unknown by RO-Crate; BagIt contains a checksummed snapshot of the web resource. Compared with the first approach, the RO-Crate is here primarily pointing at a web resource which is allowed to change without causing a BagIt checksum error.</p> <h3 id="example-of-wrapping-a-bagit-bag-in-an-ro-crate"> <a href="#example-of-wrapping-a-bagit-bag-in-an-ro-crate" class="anchor-heading" aria-labelledby="example-of-wrapping-a-bagit-bag-in-an-ro-crate"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example of wrapping a BagIt bag in an RO-Crate </h3> <p>Alternatively, an RO-Crate can <em>wrap</em> a BagIt bag, so that the RO-Crate metadata is outside of the bag directory and can be changed without changing the payload’s checksums.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;RO-Crate root directory&gt;/
  |   ro-crate-metadata.json    # RO-Crate Metadata File MUST be present
  |   ro-crate-preview.html     # RO-Crate Website homepage MAY be present
  |   ro-crate-preview_files/   # MAY be present
  |   bag1/                     # "Wrapped" bag - could have any name
  |      bagit.txt                 # As per BagIt specification
  |      bag-info.txt              # As per BagIt specification
  |      manifest-&lt;algorithm&gt;.txt  # As per BagIt specification
  |      fetch.txt                 # Optional, per BagIt Specification
  |      data/
  |         [payload files and directories]  # 1 or more SHOULD be present
  |         example.txt 
</code></pre></div></div> <p>A <a href="../data-entities.html">Data Entity</a> describing <code class="language-plaintext highlighter-rouge">example.txt</code> in this scenario would have an <code class="language-plaintext highlighter-rouge">@id</code> of <code class="language-plaintext highlighter-rouge">bag1/data/example.txt</code>:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bag1/data/example.txt"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example file"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h2 id="repository-specific-identifiers"> <a href="#repository-specific-identifiers" class="anchor-heading" aria-labelledby="repository-specific-identifiers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Repository-specific identifiers </h2> <p><em>Root Data Entities</em> MAY include repository-specific identifiers, described using <a href="../contextual-entities.html">Contextual Entities</a> using a <a href="http://schema.org/PropertyValue">PropertyValue</a>, with a <a href="http://schema.org/name">name</a> that identifies the repository and the <a href="http://schema.org/identifier">identifier</a> as a value. The <em>same</em> identifier MAY be used in multiple different repositories and effectively namespaced using the <code class="language-plaintext highlighter-rouge">name</code> of the <code class="language-plaintext highlighter-rouge">ProperyValue</code>.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dataset"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://doi.org/10.4225/59/59672c09f4a4b"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_:localid:my-repo:my-id"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_:localid:other-repo:https://doi.org/10.4225/59/59672c09f4a4b"</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">

 </span><span class="p">{</span><span class="w">
   </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_:localid:my-repo:my-id"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PropertyValue"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-repo"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-id"</span><span class="w">
 </span><span class="p">}</span><span class="w">

  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"@id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"_:localid:other-repo:https://doi.org/10.4225/59/59672c09f4a4b"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"@type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PropertyValue"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other-repo"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://doi.org/10.4225/59/59672c09f4a4b"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <!-- Below are reference links not rendered in HTML, see https://kramdown.gettalong.org/syntax.html#reference-links Be aware that this file is used by RO-Crate 1.1 and later versions of the specification, DO NOT DELETE entries and DO NOT change VERSIONED links. This file is included by the others using this %include line (excluding comment/endcomment) and is also rendered into the end of the PDF. --> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-100 mb-0">&#169; Copyright 2021-2023. University of Technology Sydney, The University of Manchester UK and RO-Crate contributors</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/ResearchObject/ro-crate/edit/master/docs/1.1/appendix/implementation-notes.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> 
<!-- Mirrored from www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 04 Aug 2023 18:06:53 GMT -->
</html>
